# Default values for mcp-gateway.
# This is a YAML-formatted file.

# Image configuration for mcp-gateway broker-router (deployed by controller)
image:
  repository: ghcr.io/kuadrant/mcp-gateway
  # tag defaults to Chart.appVersion if empty
  tag: ""

# Image configuration for mcp-controller
imageController:
  repository: ghcr.io/kuadrant/mcp-controller
  # tag defaults to Chart.appVersion if empty
  tag: ""
  pullPolicy: IfNotPresent

# Controller configuration
controller:
  # Enable/disable controller deployment
  enabled: true

# Broker configuration (applied to broker-router deployed by controller)
broker:
  # How often the broker pings upstream MCP servers (e.g., "60s", "5m")
  pollInterval: "60s"


# Gateway configuration
gateway:
  # publicHost set the value for --mcp-gateway-public-host flag
  publicHost: mcp.127-0-0-1.sslip.io
  # Create a Gateway resource
  create: false
  # Name of the Gateway (defaults to release fullname)
  name: "mcp-gateway"
  # Namespace for the Gateway (defaults to release namespace)
  namespace: "gateway-system"
  # Gateway class name (e.g., istio, nginx)
  gatewayClassName: istio
  # Port for listeners
  port: 8080
  # Internal wildcard hostname pattern for MCP server routes
  internalHostPattern: "*.mcp.local"
  # Allowed routes configuration
  allowedRoutes:
    # Which namespaces can attach routes (All, Same, or Selector)
    from: All
  # Additional listeners to add to the Gateway
  additionalListeners: []
  # Example:
  # - name: custom-listener
  #   hostname: "custom.example.com"
  #   port: 8080
  #   protocol: HTTP
  #   allowedRoutes:
  #     namespaces:
  #       from: All
  # NodePort service for the Gateway (for local development/Kind clusters)
  nodePort:
    # Create a NodePort service for the Gateway
    create: false
    # NodePort for the MCP port
    mcpPort: 30471
    # Status port configuration (Istio health check port)
    statusPort:
      enabled: false
      # NodePort for the status port (leave empty for auto-assignment)
      nodePort: null

# HTTPRoute configuration
httpRoute:
  # Create an HTTPRoute resource for the MCP Gateway
  create: false
  # Gateway reference - the Gateway this HTTPRoute attaches to
  gatewayRef:
    # Name of the Gateway
    name: mcp-gateway
    # Namespace of the Gateway
    namespace: gateway-system

# MCPGatewayExtension configuration
mcpGatewayExtension:
  # Create an MCPGatewayExtension resource
  create: true
  # Gateway reference - the Gateway this MCP Gateway instance is responsible for
  gatewayRef:
    # Name of the Gateway
    name: mcp-gateway
    # Namespace of the Gateway (if different from release namespace, a ReferenceGrant will be created)
    namespace: gateway-system
